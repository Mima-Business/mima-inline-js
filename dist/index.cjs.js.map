{"version":3,"file":"index.cjs.js","sources":["../src/core/utils.js","../src/ui/modal.js","../src/core/stripe.js","../src/config.js","../src/core/checkout.js","../src/ui/spinner.js","../src/core/api.js","../src/core/paystack.js","../src/ui/injectStyles.js","../src/index.js","../src/ui/button.js","../src/ui/option.js"],"sourcesContent":["export function qs(sel, root = document) {\n  return root.querySelector(sel);\n}\nexport function qsa(sel, root = document) {\n  return Array.from(root.querySelectorAll(sel));\n}\nexport function ce(tag, cls) {\n  const el = document.createElement(tag);\n  if (cls) el.className = cls;\n  return el;\n}\nexport function append(parent, ...children) {\n  children.forEach((c) => c && parent.appendChild(c));\n  return parent;\n}\nexport function remove(el) {\n  if (el && el.parentNode) el.parentNode.removeChild(el);\n}\nexport function text(tag, txt, cls) {\n  const el = ce(tag, cls);\n  el.textContent = txt;\n  return el;\n}\nexport function loadScript(src) {\n  return new Promise((res, rej) => {\n    if (qsa(`script[src=\"${src}\"]`).length) return res();\n    const s = ce(\"script\");\n    s.src = src;\n    s.async = true;\n    s.onload = () => res();\n    s.onerror = () => rej(new Error(`Failed to load ${src}`));\n    document.head.appendChild(s);\n  });\n}\nexport function lockScroll(lock = true) {\n  const cls = \"mima-scroll-lock\";\n  if (lock) document.documentElement.classList.add(cls);\n  else document.documentElement.classList.remove(cls);\n}\n","import { ce, append, remove, lockScroll } from \"../core/utils.js\";\n\nexport function createModal({ onClose }) {\n  const host = ce(\"div\", \"checkoutModal\"); // same as React root\n  const backdrop = ce(\"div\", \"backdrop\");\n  const modalContent = ce(\"div\", \"modalContent\");\n\n  append(host, backdrop, modalContent);\n\n  function open() {\n    document.body.appendChild(host);\n    lockScroll(true);\n  }\n\n  function close() {\n    lockScroll(false);\n    remove(host);\n    onClose && onClose();\n  }\n\n  backdrop.addEventListener(\"click\", close);\n\n  return { host, backdrop, modalContent, open, close };\n}\n\nexport function setBodyContent(modal, node) {\n  modal.modalContent.innerHTML = \"\";\n  if (node) modal.modalContent.appendChild(node);\n}\n","import { loadScript, ce } from \"./utils.js\";\nconst STRIPE_JS = \"https://js.stripe.com/v3\";\n\nexport async function mountStripe({\n  clientSecret,\n  publishableKey,\n  container,\n  currencyCode,\n  amount,\n  payButtonEl,\n  returnUrl,\n  onSuccess,\n  onClose,\n}) {\n  await loadScript(STRIPE_JS);\n  if (!window.Stripe) throw new Error(\"Stripe.js failed to load\");\n\n  const stripe = window.Stripe(publishableKey);\n  const elements = stripe.elements({\n    clientSecret,\n    appearance: { theme: \"stripe\" },\n  });\n\n  // Mount PaymentElement only\n  const paymentEl = elements.create(\"payment\");\n  paymentEl.mount(container);\n\n  // Decide which Pay button to use\n  const payBtn =\n    payButtonEl ||\n    (() => {\n      const b = ce(\"button\", \"mima-btn\");\n      b.type = \"button\";\n      b.textContent = `Pay ${formatAmount(amount, currencyCode)}`;\n      container.parentNode.appendChild(b);\n      return b;\n    })();\n\n  const err = ce(\"div\", \"mima-error\");\n\n  payBtn.addEventListener(\"click\", async () => {\n    payBtn.disabled = true;\n    err.textContent = \"\";\n\n    const { error } = await stripe.confirmPayment({\n      elements,\n      confirmParams: returnUrl ? { return_url: returnUrl } : {},\n      redirect: \"if_required\",\n    });\n\n    payBtn.disabled = false;\n\n    if (error) {\n      container.parentNode.appendChild(err);\n      err.textContent = error.message || \"Payment failed.\";\n      return;\n    }\n\n    onSuccess && onSuccess();\n    onClose && onClose();\n  });\n}\n\nfunction formatAmount(amount, currency) {\n  try {\n    return new Intl.NumberFormat(undefined, {\n      style: \"currency\",\n      currency,\n    }).format(amount);\n  } catch {\n    return amount;\n  }\n}\n","export const STRIPE_PUBLIC_KEY = process.env.STRIPE_PUBLIC_KEY;\nexport const PAYSTACK_PUBLIC_KEY = process.env.PAYSTACK_PUBLIC_KEY;\nexport const BASE_API_URL = process.env.BASE_API_URL;\nexport const TEST_STRIPE_PUBLIC_KEY = process.env.TEST_STRIPE_PUBLIC_KEY;\nexport const TEST_PAYSTACK_PUBLIC_KEY = process.env.TEST_PAYSTACK_PUBLIC_KEY;\nexport const TEST_BASE_API_URL = process.env.TEST_BASE_API_URL;\nexport const logoUrl =\n  \"https://e3bc7d7a5a59a4dca7c1c17bfa0270e4b3.s3.us-east-2.amazonaws.com/e8b61357-334e-4879-90b6-6fbe722cc54c-7e5a1560-43a6-4dea-ac4a-bbbda8598ab3-mima-logo.png\";\n","import { createModal, setBodyContent } from \"../ui/modal.js\";\nimport { spinner } from \"../ui/spinner.js\";\nimport { createInvoiceSession } from \"./api.js\";\nimport { ce } from \"./utils.js\";\nimport { mountStripe } from \"./stripe.js\";\nimport { startPaystack } from \"./paystack.js\";\nimport {\n  BASE_API_URL,\n  logoUrl,\n  PAYSTACK_PUBLIC_KEY,\n  STRIPE_PUBLIC_KEY,\n  TEST_BASE_API_URL,\n  TEST_PAYSTACK_PUBLIC_KEY,\n  TEST_STRIPE_PUBLIC_KEY,\n} from \"../config.js\";\n\nexport async function openCheckout(opts) {\n  const { payload, signature, testMode = false, onSuccess, onClose } = opts;\n\n  const baseUrl = BASE_API_URL;\n  const testBaseUrl = TEST_BASE_API_URL;\n  const stripePublicKey = STRIPE_PUBLIC_KEY;\n  const testStripePublicKey = TEST_STRIPE_PUBLIC_KEY;\n  const paystackPublicKey = PAYSTACK_PUBLIC_KEY;\n  const testPaystackPublicKey = TEST_PAYSTACK_PUBLIC_KEY;\n  const urls = {\n    product: \"/invoices/new/checkout\",\n    bookings: \"/invoices/accept-booking-invoice\",\n  };\n\n  const chosenBase = testMode ? testBaseUrl || baseUrl : baseUrl;\n  console.log(\"chosenBase\", chosenBase);\n\n  if (!chosenBase)\n    throw new Error(\n      \"MimaCheckout: `baseUrl` (and optionally `testBaseUrl`) is required.\"\n    );\n  const currencyCode = payload?.order?.currencyCode;\n  const modal = createModal({ onClose });\n  modal.open();\n\n  // Loading state\n  const loadNode = ce(\"div\", \"mima-center\");\n  loadNode.appendChild(spinner(75));\n  setBodyContent(modal, loadNode);\n\n  let invoice;\n  try {\n    invoice = await createInvoiceSession({\n      baseUrl: chosenBase,\n      path: urls.product,\n      payload,\n      signature,\n    });\n  } catch (e) {\n    modal.open();\n    const err = ce(\"div\", \"mima-error\");\n    err.textContent = e.message;\n    setBodyContent(modal, err);\n    return;\n  }\n\n  if (invoice?.currencyCode === \"NGN\") {\n    const pk = testMode\n      ? testPaystackPublicKey || paystackPublicKey\n      : paystackPublicKey;\n\n    if (!pk) {\n      setBodyContent(modal, errorNode(\"Paystack key missing.\"));\n      return;\n    }\n\n    modal.close();\n\n    try {\n      await startPaystack({\n        publicKey: pk,\n        email: invoice?.customer?.email,\n        amount: invoice?.transactionAmount,\n        metadata: {\n          custom_fields: [\n            {\n              display_name: \"business\",\n              variable_name: \"business\",\n              value: invoice?.business?._id,\n            },\n            {\n              display_name: \"invoiceNumber\",\n              variable_name: \"invoiceNumber\",\n              value: `INV-${invoice?.number}`,\n            },\n            {\n              display_name: \"customerName\",\n              variable_name: \"customerName\",\n              value: invoice?.customer?.fullname,\n            },\n            {\n              display_name: \"invoice\",\n              variable_name: \"invoice\",\n              value: invoice?._id,\n            },\n            { display_name: \"type\", variable_name: \"type\", value: \"INVOICE\" },\n          ],\n        },\n        onSuccess: () => {\n          onSuccess && onSuccess();\n          modal.close();\n        },\n        onClose: () => {\n          onClose && onClose();\n          modal.close();\n        },\n      });\n    } catch (e) {\n      setBodyContent(modal, errorNode(e.message));\n    }\n    return;\n  }\n\n  // Stripe flow\n  modal.open();\n\n  const stripeKey = testMode\n    ? testStripePublicKey || stripePublicKey\n    : stripePublicKey;\n  if (!stripeKey) {\n    setBodyContent(modal, errorNode(\"Stripe key missing.\"));\n    return;\n  }\n  if (!invoice?.stripeSessionId) {\n    setBodyContent(modal, errorNode(\"Stripe client secret missing.\"));\n    return;\n  }\n\n  // Build UI\n  const wrap = ce(\"div\", \"mima-stripe-wrap\");\n\n  // Top info (amount + note)\n  const top = ce(\"div\", \"mima-top\");\n  const topP = ce(\"p\");\n  topP.style.color = \"#464646\";\n  const amtSpan = ce(\"span\", \"mima-top-span\");\n  amtSpan.textContent = `${invoice.currencyCode} ${invoice.transactionAmount}`;\n  topP.textContent = \"Pay \";\n  topP.appendChild(amtSpan);\n\n  const note = ce(\"p\", \"mima-top-first\");\n  note.textContent = \"All transactions are secure and encrypted.\";\n\n  top.appendChild(topP);\n  top.appendChild(note);\n  wrap.appendChild(top);\n\n  // PaymentElement mount area\n  const mountPoint = ce(\"div\", \"mima-stripe-mount\");\n  wrap.appendChild(mountPoint);\n\n  // Actions (Go Back | Pay now)\n  const actions = ce(\"div\", \"mima-stripe-actions\");\n  const backBtn = ce(\"button\", \"mima-btn outlined full\");\n  backBtn.type = \"button\";\n  backBtn.textContent = \"Go Back\";\n  backBtn.addEventListener(\"click\", () => {\n    modal.close(); // mirrors goBack in React\n    onClose && onClose();\n  });\n\n  const payBtn = ce(\"button\", \"mima-btn full\");\n  payBtn.type = \"button\";\n  payBtn.textContent = \"Pay now\";\n  actions.appendChild(backBtn);\n  actions.appendChild(payBtn);\n  wrap.appendChild(actions);\n\n  // Powered by (with optional logo)\n  const powered = ce(\"a\", \"mima-powered\");\n  powered.href = \"https://mimapay.africa/\";\n  powered.target = \"_blank\";\n  powered.rel = \"noopener noreferrer\";\n\n  const poweredText = ce(\"span\");\n  poweredText.textContent = \"Powered by\";\n  powered.appendChild(poweredText);\n\n  // If you have a logo URL available, append it. (See note below)\n  if (logoUrl) {\n    const img = document.createElement(\"img\");\n    img.src = logoUrl;\n    img.alt = \"Mima Logo\";\n    img.className = \"mima-powered-logo\";\n    powered.appendChild(img);\n  }\n\n  wrap.appendChild(powered);\n\n  setBodyContent(modal, wrap);\n\n  // Mount Stripe + wire the Pay button\n  try {\n    await mountStripe({\n      clientSecret: invoice.stripeSessionId,\n      publishableKey: stripeKey,\n      container: mountPoint,\n      currencyCode: invoice.currencyCode,\n      amount: invoice.transactionAmount,\n      // ✨ NEW: hand the pay button to Stripe mount so it binds confirmPayment\n      payButtonEl: payBtn,\n      // Optional: where to return if 3DS redirect happens\n      returnUrl:\n        payload?.callBackUrl && payload.callBackUrl.startsWith(\"http\")\n          ? payload.callBackUrl\n          : window.location.href,\n      onSuccess: () => {\n        onSuccess && onSuccess();\n        modal.close();\n      },\n      onClose: () => modal.close(),\n    });\n  } catch (e) {\n    setBodyContent(modal, errorNode(e.message));\n  }\n}\n\nfunction errorNode(message) {\n  const n = ce(\"div\", \"mima-error\");\n  n.textContent = message || \"An error occurred.\";\n  return n;\n}\n","import { ce } from \"../core/utils.js\";\nexport function spinner(size = 48) {\n  const s = ce(\"div\", \"mima-spinner\");\n  s.style.width = `${size}px`;\n  s.style.height = `${size}px`;\n  return s;\n}\n","export async function createInvoiceSession({\n  baseUrl,\n  path,\n  payload,\n  signature,\n}) {\n  const url = `${baseUrl}${path}`;\n  const res = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"x-mima-signature\": signature,\n    },\n    body: JSON.stringify(payload),\n  });\n  const data = await res.json();\n  if (!res.ok || data?.error) {\n    const msg = data?.message || \"Something went wrong. Please try again.\";\n    throw new Error(msg);\n  }\n  return data; // Expecting shape of InvoiceResponse from your backend\n}\n","import { loadScript } from \"./utils.js\";\nconst PAYSTACK_JS = \"https://js.paystack.co/v1/inline.js\";\n{\n  /* <script src=\"https://js.paystack.co/v2/inline.js\"></script> */\n}\n\nexport async function startPaystack({\n  publicKey,\n  email,\n  amount,\n  metadata,\n  onSuccess,\n  onClose,\n}) {\n  await loadScript(PAYSTACK_JS);\n  if (!window.PaystackPop) throw new Error(\"Paystack failed to load\");\n  const handler = window.PaystackPop.setup({\n    key: publicKey,\n    email,\n    amount: Math.round(amount * 100),\n    metadata,\n    callback: function () {\n      onSuccess && onSuccess();\n    },\n    onClose: function () {\n      onClose && onClose();\n    },\n  });\n  handler.openIframe();\n}\n","// src/injectStyles.js\n\nexport function injectStyles() {\n  if (document.getElementById(\"mima-styles\")) return;\n\n  const css = `\n* {\n  line-height: 1.2;\n}\nh1,h2,h3,h4,h5,h6,p {\n  all: unset;\n  line-height: 1.4;\n  display: block;\n}\nh1,h2,h3,h4,h5,h6 { font-weight: 600; }\n\n:root {\n  --primary-normal: #1f68d6;\n  --primary-hover: #003c97;\n  --grey-200: #e5e7eb;\n  --dark-700: #414651;\n  --dark-900: #1f2937;\n}\n\n/* Overlay & Modal */\n.mima-scroll-lock { overflow: hidden; }\n\n.checkoutModal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 9999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-family: inherit;\n}\n\n.backdrop {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.4);\n  top: 0;\n  left: 0;\n  z-index: -1;\n}\n\n.modalContent {\n    background-color: #fff;\n  padding: 30px 20px;\n  border-radius: 12px;\n  position: relative;\n  z-index: 10000;\n  animation: modalFadeIn 0.25s ease-out;\n}\n\n@keyframes modalFadeIn {\n  0% { opacity:0; transform:scale(.96); }\n  100% { opacity:1; transform:scale(1); }\n}\n\n/* Header */\n.mima-head { display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid #eee; }\n.mima-title { font-weight:600; font-size:16px; }\n.mima-close { background:transparent; border:none; font-size:24px; cursor:pointer; }\n\n/* Body + Footer */\n.mima-body { padding:16px; }\n.mima-foot { padding:12px 16px 16px; }\n\n/* Buttons */\n.buttonBase,\n.mima-btn {\n  height:40px;\n  padding:8px 12px;\n  border-radius:6px;\n  cursor:pointer;\n  width:fit-content;\n  display:flex;\n  justify-content:center;\n  align-items:center;\n  gap:8px;\n  white-space:nowrap;\n  outline:none;\n  border:none;\n  font-weight:600;\n  transition: background-color .2s ease;\n  box-sizing: border-box;\n}\n.buttonBase:disabled,\n.mima-btn:disabled,\n.mima-btn.disabled {\n  background-color:#ccc;\n  cursor:not-allowed;\n}\n.buttonDefault,\n.mima-btn {\n  background-color:var(--primary-normal);\n  color:#fff;\n}\n.buttonDefault:hover,\n.mima-btn:hover { background-color:var(--primary-hover); }\n.buttonOutlined,\n.mima-btn.outlined {\n  background:transparent;\n  border:1px solid var(--grey-200);\n  color:var(--dark-700);\n}\n.buttonOutlined:hover,\n.mima-btn.outlined:hover {\n  border-color:var(--dark-700);\n  color:var(--dark-900);\n  background-color:var(--grey-200);\n}\n.buttonText,\n.mima-btn.text {\n  background:transparent;\n  color:var(--primary-normal);\n}\n.buttonText:hover,\n.mima-btn.text:hover { color:var(--primary-hover); }\n.buttonFull,\n.mima-btn.full { width:100%; }\n.buttonDisabled { opacity:.6; pointer-events:none; }\n\n/* Error + Loading */\n\n.mima-error {\n  background:#fff;\n  color:#d32f2f;\n  font-weight:500;\n  padding:20px;\n  border-radius:10px;\n  border:1px solid #d32f2f;\n  text-align:center;\n}\n\n.mima-center {\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  background:#fff;\n  padding:20px;\n  border-radius:10px;\n}\n\n/* Spinner */\n.spinner,\n.mima-spinner {\n  border:2px solid rgba(0,0,0,.1);\n  border-top:2px solid var(--primary-normal);\n  border-radius:50%;\n  width:20px;\n  height:20px;\n  animation: spin .6s linear infinite;\n}\n@keyframes spin { to { transform:rotate(360deg); } }\n\n/* Options & Stripe */\n.mima-option { display:flex; flex-direction: column; align-items: flex-start; gap:12px; border:1px solid #eee; padding:12px; border-radius:12px;}\n.mima-option-logo,\n.logo { height:24px; object-fit:contain; display:block; }\n.mima-option-label,\n.label { display:flex; align-items:center; gap:8px; cursor:pointer; }\n.labelText { font-weight:500; }\n\n.mima-stripe-wrap { display:flex; flex-direction:column; gap:12px; width: 500px; max-width: 100%; }\n.mima-stripe-mount { padding:8px; border:1px solid #eee; border-radius:12px; }\n.mima-stripe-actions { display:grid; grid-template-columns:150px 1fr; gap:1rem; width:100%; margin-top:12px; }\n\n/* Top Section */\n.mima-top,\n.checkoutTop { margin-bottom:8px; display:flex; flex-direction:column; font-size:20px; }\n.mima-top-span,\n.checkoutTopSpan { font-weight:600; color:#136e13; }\n.mima-top-first,\n.checkoutTopFirst { color:#6b7280; font-size:14px; margin-top:4px; }\n\n/* Powered by */\n.mima-powered,\n.mima {display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 10px;\n  gap: 10px;\n  text-decoration: none;\n  color: var(--dark-900); }\n.mima-powered-logo,\n.logo { height: 25px;\n  width: auto;\n  object-fit: contain;\n  display: block; }\n`;\n\n  const styleEl = document.createElement(\"style\");\n  styleEl.id = \"mima-styles\"; // unique id\n  styleEl.textContent = css;\n  document.head.appendChild(styleEl);\n}\n","import { openCheckout } from \"./core/checkout.js\";\nimport { renderButton } from \"./ui/button.js\";\nimport { injectStyles } from \"./ui/injectStyles.js\";\nimport { renderOption } from \"./ui/option.js\";\n\nfunction ensureOpts(opts) {\n  if (!opts || !opts.payload || !opts.signature) {\n    throw new Error(\"MimaCheckout: `payload` and `signature` are required.\");\n  }\n  return opts;\n}\n\nexport const MimaCheckout = {\n  open: (opts) => {\n    injectStyles();\n    return openCheckout(ensureOpts(opts));\n  },\n  renderButton: (opts) => {\n    injectStyles();\n    return renderButton(ensureOpts(opts));\n  },\n  renderOption: (opts) => {\n    injectStyles();\n    return renderOption(ensureOpts(opts));\n  },\n};\n\n// UMD-style global attach\nif (typeof window !== \"undefined\") {\n  window.MimaCheckout = MimaCheckout;\n}\n\nexport default MimaCheckout;\n","import { ce } from \"../core/utils.js\";\nimport { openCheckout } from \"../core/checkout.js\";\n\nexport function renderButton({\n  selector,\n  title = \"Pay with Mima\",\n  className = \"\",\n  ...checkoutProps\n}) {\n  const host =\n    typeof selector === \"string\" ? document.querySelector(selector) : selector;\n  if (!host) throw new Error(\"MimaButton: host element not found\");\n  host.classList.add(\"mima-btn\");\n  if (className) host.classList.add(...className.split(\" \"));\n  host.textContent = title;\n  host.addEventListener(\"click\", () => openCheckout(checkoutProps));\n}\n","import { ce, append } from \"../core/utils.js\";\nimport { openCheckout } from \"../core/checkout.js\";\nimport { logoUrl } from \"../config.js\";\n\nexport function renderOption({\n  selector,\n  title = \"Pay with Mima\",\n  className = \"\",\n  ...checkoutProps\n}) {\n  const host =\n    typeof selector === \"string\" ? document.querySelector(selector) : selector;\n  if (!host) throw new Error(\"PayWithMima: host element not found\");\n  host.classList.add(\"mima-option\");\n  if (className) host.classList.add(...className.split(\" \"));\n  const label = ce(\"label\", \"mima-option-label\");\n  const radio = ce(\"input\");\n  radio.type = \"radio\";\n  radio.name = checkoutProps?.groupName || \"mima-pay-option\";\n  const span = ce(\"span\", \"mima-option-text\");\n  span.textContent = title;\n  const img = ce(\"img\", \"mima-option-logo\");\n  if (logoUrl) img.src = logoUrl;\n  img.alt = \"Mima Logo\";\n\n  const btn = ce(\"button\", \"mima-btn full\");\n  btn.type = \"button\";\n  btn.textContent = \"Pay now\";\n  btn.style.display = \"none\";\n\n  radio.addEventListener(\"change\", () => {\n    btn.style.display = radio.checked ? \"block\" : \"none\";\n  });\n  btn.addEventListener(\"click\", () => openCheckout(checkoutProps));\n\n  append(label, radio, span);\n  append(host, label, img, btn);\n}\n"],"names":["ce","tag","cls","el","document","createElement","className","append","parent","children","forEach","c","appendChild","loadScript","src","Promise","res","rej","sel","root","Array","from","querySelectorAll","qsa","length","s","async","onload","onerror","Error","head","lockScroll","lock","documentElement","classList","add","remove","setBodyContent","modal","node","modalContent","innerHTML","mountStripe","clientSecret","publishableKey","container","currencyCode","amount","payButtonEl","returnUrl","onSuccess","onClose","window","Stripe","stripe","elements","appearance","theme","create","mount","payBtn","b","type","textContent","currency","Intl","NumberFormat","undefined","style","format","formatAmount","parentNode","err","addEventListener","disabled","error","confirmPayment","confirmParams","return_url","redirect","message","logoUrl","openCheckout","opts","payload","signature","testMode","urls","chosenBase","console","log","host","backdrop","close","removeChild","open","body","createModal","loadNode","invoice","size","width","height","spinner","baseUrl","path","url","fetch","method","headers","JSON","stringify","data","json","ok","createInvoiceSession","e","pk","errorNode","publicKey","email","metadata","PaystackPop","setup","key","Math","round","callback","openIframe","startPaystack","customer","transactionAmount","custom_fields","display_name","variable_name","value","business","_id","number","fullname","stripeKey","stripeSessionId","wrap","top","topP","color","amtSpan","note","mountPoint","actions","backBtn","powered","href","target","rel","poweredText","img","alt","callBackUrl","startsWith","location","n","injectStyles","getElementById","styleEl","id","ensureOpts","MimaCheckout","renderButton","selector","title","checkoutProps","querySelector","split","renderOption","label","radio","name","groupName","span","btn","display","checked"],"mappings":"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"}